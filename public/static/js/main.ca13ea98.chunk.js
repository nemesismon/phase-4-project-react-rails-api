(this["webpackJsonpreact-rails-api-project-template-client"]=this["webpackJsonpreact-rails-api-project-template-client"]||[]).push([[0],{19:function(e,t,n){},22:function(e,t,n){},28:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(23),a=n.n(s),j=(n(28),n(3)),i=(n(19),n(7)),o=n(0);var l=function(){return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Home"}),Object(o.jsx)("p",{children:"Project Management just got easier."}),Object(o.jsx)(i.b,{to:"/login",children:"Login"})]})},u=n(4);var b=function(e){var t=e.setSessionUserData,n=e.sessionUserData,r=e.loginStatus,s=e.setLoginStatus,a=e.setSessionProjData,i=e.handleGetProjects,l=Object(c.useState)(""),b=Object(j.a)(l,2),d=b[0],h=b[1],O=Object(c.useState)(""),p=Object(j.a)(O,2),x=p[0],m=p[1],f=Object(c.useState)(""),g=Object(j.a)(f,2),v=g[0],S=g[1],y=Object(c.useState)(""),C=Object(j.a)(y,2),P=C[0],_=C[1],k=Object(c.useState)(""),D=Object(j.a)(k,2),w=D[0],E=D[1],N=Object(c.useState)(""),L=Object(j.a)(N,2),T=L[0],U=L[1],A=Object(c.useState)(""),F=Object(j.a)(A,2),I=F[0],B=F[1],J=Object(c.useState)(0),H=Object(j.a)(J,2),M=H[0],G=H[1],q=Object(c.useState)(""),z=Object(j.a)(q,2),V=z[0],W=z[1],K=Object(c.useState)(!0),Q=Object(j.a)(K,2),R=Q[0],X=Q[1],Y=Object(c.useState)(),Z=Object(j.a)(Y,2),$=Z[0],ee=Z[1],te=Object(c.useState)(),ne=Object(j.a)(te,2),ce=ne[0],re=ne[1],se=Object(u.l)(),ae=function(e){e.preventDefault(),fetch("/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:x})}).then((function(e){return e.ok?e.json().then((function(e){t(e),a(i()),s(!0),se("/profile")})):e.json().then((function(e){ee(e),t(null),s(!1)}))})),re(),h(""),m("")},je=function(e){e.preventDefault(),fetch("/users",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:x,password_confirmation:v,company_name:P,address:w,trade_type:T,point_of_contact:I,phone:M,email:V})}).then((function(e){return e.ok?e.json().then((function(e){a(i()),t(e),s(!0),se("/profile")})):e.json().then((function(e){re(e),s(!1)}))})),ee(),h(""),m(""),S(""),_(""),E(""),U(""),B(""),G(0),W("")},ie=function(){if(null===n&&!1===r){var e=$?$.error:null;return Object(o.jsxs)("div",{children:[Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("h5",{className:"make_red",children:e})}),Object(o.jsxs)("form",{onSubmit:ae,children:[Object(o.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:d,onChange:function(e){return h(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:x,onChange:function(e){return m(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("button",{type:"submit",children:"Submit"})]})]})}},oe=function(){var e=ce?ce.error:null;return Object(o.jsxs)("div",{children:[Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("h5",{className:"make_red",children:e})}),Object(o.jsxs)("form",{onSubmit:je,children:[Object(o.jsx)("h5",{children:Object(o.jsx)("b",{children:"*All fields required"})}),Object(o.jsx)("input",{type:"text",name:"username",placeholder:"Username",value:d,onChange:function(e){return h(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"password",name:"password",placeholder:"Password",value:x,onChange:function(e){return m(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"password",name:"password_confirmation",placeholder:"Password Confirmation",value:v,onChange:function(e){return S(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"text",name:"company_name",placeholder:"Company Name",value:P,onChange:function(e){return _(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"text",name:"address",placeholder:"Address",value:w,onChange:function(e){return E(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"text",name:"trade_type",placeholder:"Trade Type",value:T,onChange:function(e){return U(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"text",name:"point_of_contact",placeholder:"Point of Contact",value:I,onChange:function(e){return B(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"number",name:"phone",placeholder:"Phone Number",value:M,onChange:function(e){return G(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"text",name:"email",placeholder:"Email",value:V,onChange:function(e){return W(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("button",{type:"submit",children:"Submit"})]})]})},le=function(){return X(!R)};return Object(o.jsx)("div",{children:!1===r?!0===R?Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{children:"Login"}),Object(o.jsx)("button",{onClick:function(){return le()},children:R?"Signup":"Login"}),Object(o.jsx)("br",{}),ie()]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{children:"Create Account"}),Object(o.jsx)("button",{onClick:function(){return le()},children:R?"Signup":"Login"}),Object(o.jsx)("br",{}),oe()]}):Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("h1",{children:"Logout"}),Object(o.jsx)("h4",{children:"Click to logout"}),Object(o.jsx)("button",{onClick:function(){return fetch("/logout",{method:"DELETE"}),t(null),a(null),void s(!1)},children:"Logout"})]})})},d=n(17);var h=function(e){var t=e.item,n=e.handleCompleteItem,r=e.sessionUserData,s=e.setSessionUserData,a=e.setEditErrors,i=e.projectSelector,l=e.areaSelector,u=e.selectProject,b=e.selectArea,h=e.sessionProjData,O=Object(c.useState)(!1),p=Object(j.a)(O,2),x=p[0],m=p[1],f=Object(c.useState)(""),g=Object(j.a)(f,2),v=g[0],S=g[1],y=Object(c.useState)(""),C=Object(j.a)(y,2),P=C[0],_=C[1],k=Object(c.useState)(),D=Object(j.a)(k,2),w=D[0],E=D[1],N=Object(c.useState)(!1),L=Object(j.a)(N,2),T=L[0],U=(L[1],function(){if(0!==h.length&&void 0!=h)return h.find((function(e){return e.id===t.project_id})).title});return!1===x&&!1===T?Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:t.task}),Object(o.jsx)("td",{children:U()}),Object(o.jsx)("td",{children:t.area}),Object(o.jsx)("td",{children:t.notes}),Object(o.jsx)("td",{children:t.complete_by}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"button",value:"Complete",onClick:function(){return n(t)}})}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"button",value:"Edit",onClick:function(){return m(!0)}})})]},t.id):null!==t&&!0===x?Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"text",name:"task",placeholder:t.task,value:v,onChange:function(e){S(e.target.value)}})}),Object(o.jsx)("td",{children:i()}),Object(o.jsx)("td",{children:l()}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"text",name:"notes",placeholder:t.notes,value:P,onChange:function(e){_(e.target.value)}})}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"date",name:"complete by",placeholder:t.complete_by,value:w,onChange:function(e){E(e.target.value)}})}),Object(o.jsx)("td",{children:Object(o.jsx)("input",{type:"button",value:"Save",onClick:function(e){return function(e){e.preventDefault(),fetch("/punch_items/".concat(t.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({project_id:u,task:v,area:b,notes:P,complete_by:w})}).then((function(e){return e.ok?e.json().then((function(e){console.log(e),t.project_id=e.project_id?e.project_id:t.project_id,t.task=e.task?e.task:t.task,t.area=e.area?e.area:t.area,t.notes=e.notes?e.notes:t.notes,t.complete_by=e.complete_by?e.complete_by:t.complete_by,s(Object(d.a)({},r)),m(!1)})):e.json().then((function(e){a(e)}))})),S(""),_(""),E(),m(!1)}(e)}})})]},t.id):void 0};n(22);var O=function(e){var t=e.sessionUserData,n=e.setSessionUserData,r=e.loginStatus,s=e.sessionProjData,a=e.handleGetProjects;console.log(s);var l=Object(c.useState)(!1),b=Object(j.a)(l,2),O=b[0],p=b[1],x=Object(c.useState)(""),m=Object(j.a)(x,2),f=m[0],g=m[1],v=Object(c.useState)(""),S=Object(j.a)(v,2),y=(S[0],S[1]),C=Object(c.useState)(""),P=Object(j.a)(C,2),_=P[0],k=P[1],D=Object(c.useState)(),w=Object(j.a)(D,2),E=w[0],N=w[1],L=Object(c.useState)(),T=Object(j.a)(L,2),U=T[0],A=T[1],F=Object(c.useState)(),I=Object(j.a)(F,2),B=I[0],J=I[1],H=Object(c.useState)(),M=Object(j.a)(H,2),G=M[0],q=M[1],z=Object(c.useState)(),V=Object(j.a)(z,2),W=V[0],K=V[1],Q=Object(u.l)(),R=function(e){e.preventDefault(),fetch("/punch_items",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({project_id:G,task:f,area:W,notes:_,complete_by:E,active:!0})}).then((function(e){return e.ok?e.json().then((function(e){t.punch_items.push(e),n(Object(d.a)({},t)),p(!1),a()})):e.json().then((function(e){A(e)}))})),q(null),K(null),g(""),y(""),k(""),N("")},X=function(e){fetch("/punch_items/".concat(e.id),{method:"DELETE"});for(var c=0;c<t.punch_items.length;c++)t.punch_items[c].id===e.id&&t.punch_items.splice(c,1),n(Object(d.a)({},t))},Y=function(){if(0===t.punch_items.length)return Object(o.jsx)("h5",{style:{color:"green"},children:"There are currently no items to complete!"})},Z=function(){if(0===s.length||void 0===s)return Object(o.jsxs)("h5",{children:["Please add a ",Object(o.jsx)(i.b,{to:"/projects",children:"Project"})," to begin creating Punch Items"]})},$=function(){return Object(o.jsxs)("select",{name:"project_selector",onChange:function(e){return q(e.target.value)},children:[Object(o.jsx)("option",{value:null,children:"Select Project"}),s.map((function(e){return Object(o.jsx)("option",{value:e.id,children:e.title},e.id)}))]})},ee=[{value:"Offsite",label:"Offsite"},{value:"Site",label:"Site"},{value:"Building",label:"Building"},{value:"Electrical",label:"Electrical"},{value:"Plumbing",label:"Plumbing"},{value:"HVAC",label:"HVAC"}],te=function(){return Object(o.jsxs)("select",{name:"area-selector",onChange:function(e){return K(e.target.value)},children:[Object(o.jsx)("option",{value:null,children:"Select Area"}),ee.map((function(e){return Object(o.jsx)("option",{value:e.id,children:e.value},e.id)}))]})};return Object(o.jsx)("div",{children:function(){if(!1===r)return Object(o.jsx)("h4",{children:"Unauthorized - please login"});if(null===t&&!0===r)return Object(o.jsx)("h4",{children:"Loading..."});if(null!==t&&!0===r){if(s!==[]&&void 0!==s){if(!1===O)return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Punch List"}),Object(o.jsxs)("h4",{children:["Welcome, ",t.point_of_contact,"!"]}),Object(o.jsx)("div",{align:"right",children:Object(o.jsx)("input",{type:"button",value:"Create Punch Item",onClick:function(){p(!0),A(null)}})}),Object(o.jsxs)("div",{children:[Object(o.jsxs)("table",{align:"center",className:"",children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Task"}),Object(o.jsx)("th",{children:"Project"}),Object(o.jsx)("th",{children:"Area"}),Object(o.jsx)("th",{children:"Notes"}),Object(o.jsx)("th",{children:"Complete by:"})]}),t.punch_items.map((function(e){return Object(o.jsx)(h,{item:e,handleCompleteItem:X,sessionUserData:t,setSessionUserData:n,setEditErrors:J,projectSelector:$,areaSelector:te,selectProject:G,selectArea:W,sessionProjData:s})}))]}),Y(),Z()]})]});var e=B?B.error:null,c=U?U.error:null;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Add New Punch Item"}),Object(o.jsx)("div",{align:"right",children:Object(o.jsx)("input",{type:"button",value:"Back to Punch List",onClick:function(){p(!1),J(null)}})}),Object(o.jsx)("h5",{children:Object(o.jsx)("b",{children:"*All fields required"})}),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("h5",{className:"make_red",children:c})}),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("h5",{className:"Make_red",children:e})}),Object(o.jsxs)("form",{onSubmit:R,children:[$(),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"text",name:"task",placeholder:"Task",value:f,onChange:function(e){return g(e.target.value)}}),Object(o.jsx)("ul",{}),te(),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"text",name:"notes",placeholder:"Notes",value:_,onChange:function(e){return k(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"date",name:"complete by",placeholder:"Complete By",value:E,onChange:function(e){return N(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("button",{type:"submit",children:"Submit"})]})]})}console.log(s),Q("/projects")}}()})};var p=function(e){var t=e.sessionUserData,n=e.loginStatus,r=e.sessionProjData,s=e.setSessionProjData,a=e.projectErrors,i=e.setProjectErrors,l=Object(c.useState)(!1),u=Object(j.a)(l,2),b=u[0],d=u[1],h=Object(c.useState)(""),O=Object(j.a)(h,2),p=O[0],x=O[1],m=Object(c.useState)(""),f=Object(j.a)(m,2),g=f[0],v=f[1],S=Object(c.useState)(""),y=Object(j.a)(S,2),C=y[0],P=y[1],_=Object(c.useState)(null),k=Object(j.a)(_,2),D=k[0],w=k[1],E=function(e){e.preventDefault(),fetch("/projects",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:p,address:g,owner_name:C,complete_by:D})}).then((function(e){return e.ok?e.json().then((function(e){s(e),d(!1)})):e.json().then((function(e){i(e)}))})),x(""),v(""),P(""),w()},N=function(){if(0===r.length||void 0===r)return Object(o.jsx)("h5",{children:"Please Create Project to begin creating Punch Items"})},L=function(){var e=a?a.error:null;return Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Add New Project"}),Object(o.jsx)("div",{align:"right",children:Object(o.jsx)("input",{type:"button",value:"Projects List",onClick:function(){d(!1),i(null)}})}),Object(o.jsx)("h5",{children:Object(o.jsx)("b",{children:"*All fields required"})}),Object(o.jsx)(o.Fragment,{children:Object(o.jsx)("h5",{className:"make_red",children:e})}),Object(o.jsxs)("form",{onSubmit:E,children:[Object(o.jsx)("input",{type:"text",name:"title",placeholder:"Title",value:p,onChange:function(e){return x(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"text",name:"address",placeholder:"Address",value:g,onChange:function(e){return v(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"text",name:"owner_name",placeholder:"Owner Name",value:C,onChange:function(e){return P(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("input",{type:"date",name:"complete_by",placeholder:"Complete By",value:D,onChange:function(e){return w(e.target.value)}}),Object(o.jsx)("ul",{}),Object(o.jsx)("button",{type:"submit",children:"Submit"})]})]})};return Object(o.jsx)("div",{children:!0===n?!1===b?Object(o.jsx)("div",{children:Object(o.jsxs)("div",{children:[Object(o.jsx)("h1",{children:"Project List"}),Object(o.jsx)("div",{align:"right",children:Object(o.jsx)("input",{type:"button",value:"Create Project",onClick:function(){return d(!0)}})}),Object(o.jsx)("br",{}),Object(o.jsxs)("div",{children:[Object(o.jsx)("table",{align:"center",children:Object(o.jsxs)("tbody",{children:[Object(o.jsxs)("tr",{children:[Object(o.jsx)("th",{children:"Project Name"}),Object(o.jsx)("th",{children:"Address"}),Object(o.jsx)("th",{children:"Owner Info"}),Object(o.jsx)("th",{children:"Sub Name"})]}),null===t?Object(o.jsx)("p",{children:"Please login"}):null===r&&!0===n?Object(o.jsx)("p",{children:"Loading..."}):null!==r&&!0===n?r.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.title}),Object(o.jsx)("td",{children:e.address}),Object(o.jsx)("td",{children:e.owner_name}),e.users.map((function(e){return Object(o.jsxs)("tr",{children:[Object(o.jsx)("td",{children:e.company_name}),Object(o.jsx)("td",{children:e.trade_type}),Object(o.jsx)("td",{children:e.point_of_contact}),Object(o.jsx)("td",{children:e.phone})]},Math.round(1e6*Math.random()))}))]},e.address)})):void 0]})}),N()]})]})}):Object(o.jsx)("div",{children:L()}):!1===n?Object(o.jsx)("div",{children:Object(o.jsx)("h4",{children:"Unauthorized - please login"})}):void 0})};var x=function(e){var t=e.loginStatus;return Object(o.jsxs)("div",{children:[Object(o.jsx)("br",{}),Object(o.jsxs)("b",{children:[Object(o.jsx)(i.c,{style:{textDecoration:"none"},to:"/",children:"Home \u2002"}),Object(o.jsx)(i.c,{style:{textDecoration:"none"},to:"/profile",children:"Profile \u2002"}),Object(o.jsx)(i.c,{style:{textDecoration:"none"},to:"/projects",children:"Projects \u2002"}),Object(o.jsxs)(i.c,{style:{textDecoration:"none"},to:"/login",children:[t?"Logout":"Login"," \u2002"]})]})]})};var m=function(){var e=Object(c.useState)(null),t=Object(j.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)([]),a=Object(j.a)(s,2),i=a[0],d=a[1],h=Object(c.useState)(!1),m=Object(j.a)(h,2),f=m[0],g=m[1],v=Object(c.useState)(),S=Object(j.a)(v,2),y=S[0],C=S[1],P=Object(u.l)();Object(c.useEffect)((function(){fetch("/me").then((function(e){return e.ok?e.json().then((function(e){r(e),g(!0),_()})):e.json().then((function(e){r(null),g(!1),P("/login")}))}))}),[]);var _=function(){fetch("/projects").then((function(e){return e.ok?e.json().then((function(e){d(e)})):e.json().then((function(e){C(e),d([])}))}))};return Object(o.jsx)("div",{children:Object(o.jsxs)("div",{className:"App",children:[Object(o.jsx)("header",{children:"Welcome to Builder Exchange"}),Object(o.jsxs)("div",{children:[Object(o.jsx)(x,{loginStatus:f}),Object(o.jsxs)(u.c,{children:[Object(o.jsx)(u.a,{path:"/",element:Object(o.jsx)(l,{})}),Object(o.jsx)(u.a,{path:"/profile",element:Object(o.jsx)(O,{sessionUserData:n,setSessionUserData:r,loginStatus:f,sessionProjData:i,handleGetProjects:_})}),Object(o.jsx)(u.a,{path:"/projects",element:Object(o.jsx)(p,{sessionUserData:n,setSessionUserData:r,loginStatus:f,sessionProjData:i,setSessionProjData:d,projectErrors:y,setProjectErrors:C})}),Object(o.jsx)(u.a,{path:"/login",element:Object(o.jsx)(b,{sessionUserData:n,setSessionUserData:r,loginStatus:f,setLoginStatus:g,sessionProjData:i,setSessionProjData:d,handleGetProjects:_})})]})]})]})})},f=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,32)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(o.jsx)(r.a.StrictMode,{children:Object(o.jsx)(i.a,{children:Object(o.jsx)(m,{})})}),document.getElementById("root")),f()}},[[31,1,2]]]);
//# sourceMappingURL=main.ca13ea98.chunk.js.map